BTCNANO_TEST_SRC := $(wildcard btcnano/test/run-*.c)
BTCNANO_TEST_OBJS := $(BTCNANO_TEST_SRC:.c=.o)
BTCNANO_TEST_PROGRAMS := $(BTCNANO_TEST_OBJS:.o=)

BTCNANO_TEST_COMMON_OBJS :=

$(BTCNANO_TEST_PROGRAMS): $(CCAN_OBJS) $(BTCNANO_TEST_COMMON_OBJS)
$(BTCNANO_TEST_OBJS): $(CCAN_HEADERS) $(BTCNANO_HEADERS) $(BTCNANO_SRC)

ALL_TEST_PROGRAMS += $(BTCNANO_TEST_PROGRAMS)
ALL_OBJS += $(BTCNANO_TEST_PROGRAMS:=.o)

update-mocks: $(BTCNANO_TEST_SRC:%=update-mocks/%)

check: $(BTCNANO_TEST_PROGRAMS:%=unittest/%)
